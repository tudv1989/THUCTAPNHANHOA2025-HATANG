### 1. C∆° b·∫£n v·ªÅ file XML trong KVM

File XML l√† file c·∫•u h√¨nh quan tr·ªçng nh·∫•t c·ªßa m√°y ·∫£o (VM) v√† m·∫°ng ·∫£o (network) trong KVM. N√≥ ƒë·ªãnh nghƒ©a to√†n b·ªô th√¥ng s·ªë ph·∫ßn c·ª©ng, k·∫øt n·ªëi m·∫°ng, storage, v√† c√°c thi·∫øt l·∫≠p kh√°c.

#### C·∫•u tr√∫c file XML c·ªßa m√°y ·∫£o

    <domain type='kvm'>  <!-- Lo·∫°i ·∫£o h√≥a -->
      <name>ubuntu-vm</name>  <!-- T√™n VM -->
      <memory unit='GiB'>4</memory>  <!-- RAM -->
      <vcpu>2</vcpu>  <!-- S·ªë CPU ·∫£o -->
      <os>
        <type arch='x86_64'>hvm</type>  <!-- Ki·ªÉu OS -->
        <boot dev='hd'/>  <!-- Boot t·ª´ disk -->
      </os>
      <devices>
        <disk type='file' device='disk'>  <!-- ·ªî ƒëƒ©a ·∫£o -->
          <source file='/var/lib/libvirt/images/ubuntu.qcow2'/>
        </disk>
        <interface type='network'>  <!-- Card m·∫°ng -->
          <source network='default'/>  <!-- D√πng network 'default' -->
        </interface>
      </devices>
    </domain>


#### C·∫•u tr√∫c file XML c·ªßa network



    <network>
      <name>my-network</name>  <!-- T√™n m·∫°ng -->
      <forward mode='nat'/>  <!-- Ch·∫ø ƒë·ªô NAT -->
      <ip address='192.168.100.1' netmask='255.255.255.0'>  <!-- IP d·∫£i m·∫°ng -->
        <dhcp>  <!-- C·∫•u h√¨nh DHCP -->
          <range start='192.168.100.100' end='192.168.100.200'/>
        </dhcp>
      </ip>
    </network>

### 2. T·∫°o m√°y ·∫£o b·∫±ng file XML

#### B∆∞·ªõc 1: T·∫°o file XML (v√≠ d·ª• ubuntu-vm.xml)**

    <domain type='kvm'>
      <name>ubuntu-vm</name>
      <memory unit='GiB'>4</memory>
      <vcpu>2</vcpu>
      <os>
        <type arch='x86_64'>hvm</type>
        <boot dev='hd'/>
      </os>
      <devices>
        <disk type='file' device='disk'>
          <source file='/var/lib/libvirt/images/ubuntu.qcow2'/>
        </disk>
        <interface type='network'>
          <source network='default'/>
        </interface>
     </devices>
    </domain>

#### B∆∞·ªõc 2: T·∫°o VM t·ª´ file XMLML

    virsh define ubuntu-vm.xml  # ƒêƒÉng k√Ω VM
    virsh start ubuntu-vm       # Kh·ªüi ƒë·ªông VM
    virsh list --all           # Ki·ªÉm tra tr·∫°ng th√°i

### 3. T·∫°o network m·ªõi b·∫±ng file XML

#### B∆∞·ªõc 1: T·∫°o file XML (v√≠ d·ª• my-network.xml)

    <network>
      <name>my-network</name>
      <forward mode='nat'/>
      <ip address='192.168.100.1' netmask='255.255.255.0'>
        <dhcp>
          <range start='192.168.100.100' end='192.168.100.200'/>
        </dhcp>
      </ip>
    </network>

#### B∆∞·ªõc 2: T·∫°o network t·ª´ file XML

    virsh net-define my-network.xml  # ƒêƒÉng k√Ω network
    virsh net-start my-network       # K√≠ch ho·∫°t network
    virsh net-list --all            # Ki·ªÉm tra danh s√°ch m·∫°ng

### T√≥m t·∫Øt

- File XML quy·∫øt ƒë·ªãnh to√†n b·ªô c·∫•u h√¨nh VM/network trong KVM.  
- T·∫°o VM/network: D√πng virsh define + file XML.  
- Ch·ªânh s·ª≠a: D√πng virsh edit ho·∫∑c s·ª≠a tr·ª±c ti·∫øp file XML.  
- L∆∞u √Ω:  
  - Lu√¥n backup file XML tr∆∞·ªõc khi ch·ªânh s·ª≠a.  
  - M·ªôt s·ªë thay ƒë·ªïi y√™u c·∫ßu reboot VM (vd: CPU, RAM).  

> üìå L·ªánh h·ªØu √≠ch:  
> - virsh dumpxml <t√™n-VM>: Xu·∫•t c·∫•u h√¨nh VM ra XML.  
> - virsh autostart <t√™n-VM>: T·ª± ƒë·ªông kh·ªüi ƒë·ªông VM c√πng h·ªá th·ªëng.  
> - virsh reboot <t√™n-VM>: Kh·ªüi ƒë·ªông l·∫°i VM.

