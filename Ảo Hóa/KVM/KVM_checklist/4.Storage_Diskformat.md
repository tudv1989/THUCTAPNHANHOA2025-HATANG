### 1. C∆° ch·∫ø l∆∞u tr·ªØ Thin Provisioning vs Thick Provisioning trong KVM
#### Thick Provisioning (Pre-allocated)
- ƒê·∫∑c ƒëi·ªÉm:  
  - File disk ƒë∆∞·ª£c c·∫•p ph√°t to√†n b·ªô dung l∆∞·ª£ng ngay khi t·∫°o, d√π ch∆∞a s·ª≠ d·ª•ng h·∫øt.  
  - VD: T·∫°o 1 disk 50GB ‚Üí File chi·∫øm ngay 50GB tr√™n host.  
- ∆Øu ƒëi·ªÉm:  
  - Hi·ªáu su·∫•t cao (kh√¥ng c·∫ßn m·ªü r·ªông khi ghi d·ªØ li·ªáu).  
  - Ph√π h·ª£p cho ·ª©ng d·ª•ng c·∫ßn I/O ·ªïn ƒë·ªãnh (VD: database).  
- Nh∆∞·ª£c ƒëi·ªÉm:  
  - L√£ng ph√≠ dung l∆∞·ª£ng n·∫øu kh√¥ng s·ª≠ d·ª•ng h·∫øt.  

#### Thin Provisioning (Sparse)
- ƒê·∫∑c ƒëi·ªÉm:  
  - File disk ch·ªâ chi·∫øm dung l∆∞·ª£ng th·ª±c t·∫ø ƒë√£ s·ª≠ d·ª•ng, m·ªü r·ªông khi c·∫ßn.  
  - VD: T·∫°o 1 disk 50GB nh∆∞ng m·ªõi d√πng 10GB ‚Üí File ch·ªâ chi·∫øm 10GB.  
- ∆Øu ƒëi·ªÉm:  
  - Ti·∫øt ki·ªám dung l∆∞·ª£ng l∆∞u tr·ªØ.  
  - D·ªÖ d√†ng m·ªü r·ªông (resize).  
- Nh∆∞·ª£c ƒëi·ªÉm:  
  - Hi·ªáu su·∫•t th·∫•p h∆°n do ph·∫£i c·∫•p ph√°t ƒë·ªông.  
  - C·∫ßn theo d√µi ƒë·ªÉ tr√°nh h·∫øt dung l∆∞·ª£ng ƒë·ªôt ng·ªôt.  

**L·ªánh ki·ªÉm tra dung l∆∞·ª£ng th·ª±c t·∫ø:**  

    du -h <t√™n-file-disk>  # Hi·ªÉn th·ªã dung l∆∞·ª£ng th·ª±c chi·∫øm tr√™n host

---

### 2. Ph√¢n bi·ªát 3 ƒë·ªãnh d·∫°ng disk trong KVM: ISO, RAW, QCOW2

| ƒê·ªãnh d·∫°ng | M·ª•c ƒë√≠ch                  | ƒê·∫∑c ƒëi·ªÉm                                                                 |
|--------------|-------------------------------|-----------------------------------------------------------------------------|
| ISO      | File ·∫£nh ƒëƒ©a CD/DVD           | D√πng ƒë·ªÉ c√†i OS ho·∫∑c ph·∫ßn m·ªÅm t·ª´ ·ªï ƒëƒ©a ·∫£o. Kh√¥ng th·ªÉ ghi d·ªØ li·ªáu m·ªõi (read-only). |
| RAW      | Disk ·∫£o kh√¥ng n√©n             | Dung l∆∞·ª£ng c·ªë ƒë·ªãnh, hi·ªáu su·∫•t cao, kh√¥ng h·ªó tr·ª£ snapshot.                   |
| QCOW2    | Disk ·∫£o n√©n (Copy-On-Write)   | H·ªó tr·ª£ snapshot, n√©n d·ªØ li·ªáu, dung l∆∞·ª£ng m·ªü r·ªông ƒë·ªông (thin provisioning).  |

---

### 3. T√≠nh nƒÉng v√† ·ª©ng d·ª•ng c·ªßa t·ª´ng ƒë·ªãnh d·∫°ng
#### ‚ë† ISO
- T√≠nh nƒÉng:  
  - Ch·ªâ ƒë·ªçc (read-only), th∆∞·ªùng d√πng ƒë·ªÉ boot VM.  
- ·ª®ng d·ª•ng:  
  - C√†i ƒë·∫∑t OS (VD: Ubuntu.iso, Windows.iso).  
  - Mount l√†m ·ªï ƒëƒ©a CDROM ·∫£o.  

#### ‚ë° RAW
- T√≠nh nƒÉng:  
  - Dung l∆∞·ª£ng c·ªë ƒë·ªãnh (thick provisioning).  
  - Hi·ªáu su·∫•t g·∫ßn b·∫±ng disk v·∫≠t l√Ω.  
- ·ª®ng d·ª•ng:  
  - ·ªî ƒëƒ©a h·ªá th·ªëng (VD: /dev/sda).  
  - ·ª®ng d·ª•ng c·∫ßn I/O cao (database, Kubernetes).  

#### ‚ë¢ QCOW2 (QEMU Copy-On-Write)
- T√≠nh nƒÉng:  
  - H·ªó tr·ª£ snapshot, n√©n d·ªØ li·ªáu, m√£ h√≥a.  
  - Dung l∆∞·ª£ng ƒë·ªông (thin provisioning).  
- ·ª®ng d·ª•ng:  
  - Disk linh ho·∫°t cho VM (VD: root disk c·ªßa Cloud VM).  
  - Ph√°t tri·ªÉn ph·∫ßn m·ªÅm (d·ªÖ rollback b·∫±ng snapshot).  

---

### 4. So s√°nh RAW vs QCOW2
| Ti√™u ch√≠    | RAW                        | QCOW2                      |
|----------------|-------------------------------|--------------------------------|
| Dung l∆∞·ª£ng | Chi·∫øm ƒë·ªß dung l∆∞·ª£ng ngay khi t·∫°o | Ch·ªâ chi·∫øm dung l∆∞·ª£ng ƒë√£ d√πng (ti·∫øt ki·ªám) |
| Hi·ªáu nƒÉng  | T·ªët nh·∫•t (g·∫ßn native)         | Ch·∫≠m h∆°n RAW do overhead COW   |
| Snapshot   | Kh√¥ng h·ªó tr·ª£                  | H·ªó tr·ª£ snapshot (d·ªÖ backup)    |
| M·ªü r·ªông    | Kh√≥ (ph·∫£i resize th·ªß c√¥ng)     | D·ªÖ d√†ng (qemu-img resize)      |
| B·∫£o m·∫≠t    | Kh√¥ng m√£ h√≥a                  | H·ªó tr·ª£ m√£ h√≥a (AES)            |

---

### 5. C√°ch chuy·ªÉn ƒë·ªïi gi·ªØa RAW v√† QCOW2
#### Chuy·ªÉn RAW ‚Üí QCOW2
qemu-img convert -f raw -O qcow2 disk.raw disk.qcow2
- Gi·∫£i th√≠ch:  
  - -f raw: ƒê·ªãnh d·∫°ng ƒë·∫ßu v√†o.  
  - -O qcow2: ƒê·ªãnh d·∫°ng ƒë·∫ßu ra.  

#### Chuy·ªÉn QCOW2 ‚Üí RAW

    qemu-img convert -f qcow2 -O raw disk.qcow2 disk.raw

#### Ki·ªÉm tra th√¥ng tin disk

    qemu-img info disk.qcow2

Output m·∫´u:

  + file format: qcow2
  + virtual size: 10G (10737418240 bytes)
  + disk size: 2.5G  # Dung l∆∞·ª£ng th·ª±c chi·∫øm tr√™n host
---

### T√≥m t·∫Øt
- Thick Provisioning: T·ªët cho hi·ªáu nƒÉng, nh∆∞ng l√£ng ph√≠ dung l∆∞·ª£ng.  
- Thin Provisioning: Ti·∫øt ki·ªám dung l∆∞·ª£ng, ph√π h·ª£p cho cloud.  
- RAW: Hi·ªáu su·∫•t cao, kh√¥ng snapshot.  
- QCOW2: H·ªó tr·ª£ snapshot, n√©n d·ªØ li·ªáu, ph√π h·ª£p cho VM linh ho·∫°t.  
- Chuy·ªÉn ƒë·ªïi ƒë·ªãnh d·∫°ng: D√πng qemu-img convert.

> üí° L·ª±a ch·ªçn t·ªëi ∆∞u:  
> - D√πng QCOW2 cho h·∫ßu h·∫øt VM (v√¨ t√≠nh linh ho·∫°t).  
> - D√πng RAW n·∫øu c·∫ßn hi·ªáu su·∫•t t·ªëi ƒëa (VD: database).