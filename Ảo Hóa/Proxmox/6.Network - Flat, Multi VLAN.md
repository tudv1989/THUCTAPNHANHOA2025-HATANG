## Network configtion

Proxmox VE sử dụng stack mạng Linux. Điều này cung cấp rất nhiều tính linh hoạt về cách thiết lập mạng trên các nút Proxmox VE. Cấu hình có thể được thực hiện thông qua GUI hoặc bằng cách chỉnh sửa thủ công tệp /etc/network/interfaces, chứa toàn bộ cấu hình mạng.
có mô tả định dạng đầy đủ. Tất cả các công cụ Proxmox VE đều cố gắng hết sức để giữ nguyên các sửa đổi trực tiếp của người dùng, nhưng sử dụng GUI vẫn được ưu tiên hơn, vì nó bảo vệ bạn khỏi các lỗi.
Cần có giao diện cầu nối Linux (thường được gọi là vmbrX) để kết nối khách với mạng vật lý bên dưới. Có thể coi nó như một công tắc ảo mà khách và giao diện vật lý được kết nối
vào. Phần này cung cấp một số ví dụ về cách mạng có thể được thiết lập để phù hợp với các trường hợp sử dụng khác nhau như dự phòng với liên kết, vlan hoặc định tuyến và thiết lập NAT.

Không nên sử dụng các công cụ Debian truyền thống ifup và ifdown nếu không chắc chắn, vì chúng có một số
bẫy như làm gián đoạn tất cả lưu lượng truy cập của khách trên ifdown vmbrX nhưng không kết nối lại các khách đó
khi thực hiện ifup trên cùng một cây cầu sau đó.

## Apply Network Changes

Proxmox VE không ghi trực tiếp các thay đổi vào ``/etc/network/interfaces``. Thay vào đó, Proxmox ghi vào
một tệp tạm thời có tên là ``/etc/network/interfaces.new``, theo cách này, bạn có thể thực hiện nhiều thay đổi liên quan cùng
một lúc. Điều này cũng cho phép đảm bảo các thay đổi của bạn là chính xác trước khi áp dụng, vì cấu hình mạng không đúng
có thể khiến một nút không thể truy cập được.

#### Tải lại mạng trực tiếp bằng ``ifupdown2``

Với gói ifupdown2 được đề xuất (mặc định cho các cài đặt mới kể từ Proxmox VE 7.0), bạn có thể
áp dụng các thay đổi cấu hình mạng mà không cần khởi động lại. Nếu bạn thay đổi cấu hình mạng thông qua GUI,
bạn có thể nhấp vào nút Áp dụng cấu hình. Thao tác này sẽ di chuyển các thay đổi từ tệp ``/etc/network/interfaces.new``
sang ``/etc/network/interfaces`` và áp dụng chúng trực tiếp.
Nếu bạn thực hiện thay đổi thủ công trực tiếp vào tệp ``/etc/network/interfaces``, bạn có thể áp dụng chúng bằng cách
chạy 

    ifreload -a

Lưu ý

Nếu bạn đã cài đặt Proxmox VE trên Debian hoặc nâng cấp lên Proxmox VE 7.0 từ bản cài đặt Proxmox VE cũ hơn
, hãy đảm bảo ifupdown2 đã được cài đặt: 

    apt install ifupdown2

#### Khởi động lại Node để áp dụng

Một cách khác để áp dụng cấu hình mạng mới là khởi động lại node. Trong trường hợp đó, dịch vụ systemd
pvenetcommit sẽ kích hoạt tệp staging interfaces.new trước khi dịch vụ mạng áp dụng cấu hình đó.

## Quy ước đặt tên cấu hình mạng - Naming Conventions

Proxmox hiện đang sử dụng các quy ước đặt tên sau cho tên thiết bị:

• Thiết bị Ethernet: en*, tên giao diện mạng systemd. Sơ đồ đặt tên này được sử dụng cho các cài đặt Proxmox
VE mới kể từ phiên bản 5.0.
• Thiết bị Ethernet: eth[N], trong đó 0 ≤ N (eth0, eth1, . . . ) Sơ đồ đặt tên này được sử dụng cho các máy chủ Proxmox
VE được cài đặt trước bản phát hành 5.0. Khi nâng cấp lên 5.0, tên được giữ nguyên.
• Tên cầu nối: Thường là vmbr[N], trong đó 0 ≤ N ≤ 4094 (vmbr0 - vmbr4094), nhưng bạn có thể sử dụng bất kỳ
chuỗi chữ số nào bắt đầu bằng một ký tự và dài tối đa 10 ký tự.
• Bonds: bond[N], trong đó 0 ≤ N (bond0, bond1, . . . )
• VLAN: Chỉ cần thêm số VLAN vào tên thiết bị, phân tách bằng dấu chấm (eno1.50, bond1.30)
Điều này giúp gỡ lỗi các sự cố mạng dễ dàng hơn, vì tên thiết bị ngụ ý loại thiết bị.