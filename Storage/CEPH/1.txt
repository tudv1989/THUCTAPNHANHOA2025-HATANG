hostnamectl set-hostname ceph-node1.dinhtu.xyz
hostnamectl set-hostname ceph-node2.dinhtu.xyz
hostnamectl set-hostname ceph-node3.dinhtu.xyz

cat > ~/.ssh/config << 'OEF'
Host ceph-node1
    Hostname ceph-node1.dinhtu.xyz
    User root
Host ceph-node2
    Hostname ceph-node2.dinhtu.xyz
    User root
Host ceph-node3
    Hostname ceph-node3.dinhtu.xyz
    User root
OEF

chmod 600 ~/.ssh/config

cat >> /etc/hosts << 'OEF'
10.10.20.3 ceph-node1.dinhtu.xyz ceph-node1
10.10.20.22 ceph-node2.dinhtu.xyz ceph-node2
10.10.20.20 ceph-node3.dinhtu.xyz ceph-node3
OEF

ssh-copy-id -o StrictHostKeychecking=no ceph-node1
ssh-copy-id -o StrictHostKeychecking=no ceph-node2
ssh-copy-id -o StrictHostKeychecking=no ceph-node3


for NODE in ceph-node1 ceph-node2 ceph-node3
do
    ssh -o StrictHostKeychecking=no $NODE "apt update; apt -y install ceph"
done 



