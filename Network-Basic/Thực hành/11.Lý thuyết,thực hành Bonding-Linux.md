## Trên Linux, có 7 chế độ bonding (mode link aggregation) sau đây:

#### Mode 0 (balance-rr - Round-Robin):

    Phân phối các frame luân phiên qua các slave interface.

    Cân bằng tải tốt, nhưng không đảm bảo thứ tự các frame.

#### Mode 1 (active-backup):

    Chỉ có một slave interface hoạt động, các slave khác ở trạng thái dự phòng.

    Khi slave hoạt động bị lỗi, một slave khác sẽ được kích hoạt.

    Không cân bằng tải.

#### Mode 2 (balance-xor):

    Sử dụng một hàm băm để quyết định gửi frame qua slave nào.

    Đảm bảo thứ tự các frame, nhưng không cân bằng tải.

#### Mode 3 (broadcast):

    Gửi tất cả các frame qua tất cả các slave interface.

    Đảm bảo tính dự phòng, nhưng không cân bằng tải.

#### Mode 4 (802.3ad - Dynamic Link Aggregation):

    Sử dụng LACP (Link Aggregation Control Protocol) để tự động cấu hình các kết nối.

    Cân bằng tải tốt, đảm bảo thứ tự các frame.

#### Mode 5 (balance-tlb - Adaptive Transmit Load Balancing):

    Tự động cân bằng tải ở lớp 2 (MAC) dựa trên tải của mỗi slave.

    Không cần LACP, nhưng không đảm bảo thứ tự các frame.

#### Mode 6 (balance-alb - Adaptive Load Balancing):

    Kết hợp cả cân bằng tải ở lớp 2 (MAC) và lớp 3 (IP).

    Không cần LACP, đảm bảo tính dự phòng, nhưng không đảm bảo thứ tự các frame.

Tùy thuộc vào yêu cầu của ứng dụng và đặc điểm của mạng, bạn có thể chọn một chế độ bonding phù hợp. Các chế độ 0, 4, 5 và 6 được sử dụng phổ biến nhất.

## Thực hành testing từng mode

Thực hiện config Ether Channel trên Cisco C3750 và 2 port trên ubuntu22.04 với eno1 và eno2

    swcore1#show etherchannel summary

    Flags:  D - down        P - bundled in port-channel
            I - stand-alone s - suspended
            H - Hot-standby (LACP only)
            R - Layer3      S - Layer2
            U - in use      f - failed to allocate aggregator
    
            M - not in use, minimum links not met
            u - unsuitable for bundling
            w - waiting to be aggregated
            d - default port


    Number of channel-groups in use: 0
    Number of aggregators:           0

    Group  Port-channel  Protocol    Ports
    ------+-------------+-----------+-----------------------------------------------

#### Cấu hình switch Cisco nhóm port Gi1/0/3-4 thành Po1

    swcore1(config)#interface range Gi1/0/3-4

    swcore1(config-if-range)#no shutdown

    swcore1(config)#interface range Gi1/0/2 - Gi1/0/3

    swcore1(config-if-range)#channel-group 1 mode active

    swcore1(config)#interface port-channel 1

    swcore1(config-if)#sw trunk encapsulation dot1q

    swcore1(config-if)#sw mode trunk

    swcore1(config-if)#end
    swcore1#wr mem
    Building configuration...
    [OK]

##### 2. Hai port trên server gom thành 1

Mình có máy chủ ubuntu 22.04, mình cài đặt các gói sau:

    apt-get install ifenslave

Tạo file config trong /etc/netplan/

    /etc/netplan/bonding-eno1-eno2.yaml

  <img src="Basicnetworkimages/82.png">

Đã ssh thành công

  <img src="Basicnetworkimages/83.png">